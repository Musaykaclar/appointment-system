@using MudBlazor
@using AppointmentSystem.Application.DTOs

<MudDialog>
    <DialogContent>
        <MudText Typo="Typo.body1" Class="mb-3">
            <strong>@Appointment?.Title</strong> başlıklı randevuyu reddetmek için lütfen bir açıklama giriniz.
        </MudText>
        <MudTextField @bind-Value="RejectComment" 
                     Label="Red Nedeni*" 
                     Variant="Variant.Outlined"
                     Lines="3"
                     Required="true"
                     Immediate="true"
                     RequiredError="Red nedeni zorunludur" />
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">İptal</MudButton>
        <MudButton Color="Color.Error" 
                  Variant="Variant.Filled" 
                  OnClick="Submit"
                  Disabled="@string.IsNullOrWhiteSpace(RejectComment)">
            Reddet
        </MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] 
    public IDialogReference? Dialog { get; set; }
    
    [Parameter] public AppointmentDto? Appointment { get; set; }

    private string RejectComment { get; set; } = string.Empty;

    void Submit()
    {
        if (!string.IsNullOrWhiteSpace(RejectComment))
        {
            Dialog?.Close(DialogResult.Ok(RejectComment));
        }
    }

    void Cancel() 
    {
        Dialog?.Close(DialogResult.Cancel());
    }
}